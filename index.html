<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content= "width=device-width, initial-scale=1.0">
    <title>Concurso de Pelotas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
	
            background-image: url('vallartatpk.jpg');
            background-size: cover; /* Hace que la imagen cubra toda la página */
            background-position: center; /* Centra la imagen de fondo */
            background-repeat: no-repeat; /* Evita que la imagen se repita */
            /*min-height: 100vh*/; /* Asegura que el cuerpo ocupe al menos toda la altura de la ventana */
	    width: 100vw;
	    height: 100vh;
            text-align: center;
            margin: 0;
            padding: 0;
	    overflow: hidden;

	 
        }
        .container {
            margin-top: 50px;
            border-radius: 10px; /* Bordes redondeados */
            padding: 20px; /* Espacio interno */
            
        }
        h1 {
            color: white; /* Cambia el color del texto del encabezado a blanco */
            text-shadow: 2px 2px 4px black; /* Añade sombra negra para dar efecto de borde */
        }
        h2 {
            color: white; /* Cambia el color del texto del subtítulo a blanco */
            text-shadow: 2px 2px 4px black; /* Añade sombra negra para dar efecto de borde */
        }
        .tombola {
            width: 300px;
            height: 300px;
            border: 0px;
            border-radius: 50%;
            margin: 50px auto;
            position: relative;
            overflow: hidden; /* Asegura que la imagen se recorte en forma circular */
        }
        
        }
        @keyframes spin {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        .winner {
            font-size: 10vw;
            font-weight: bold;
            color: white;
            margin-top: 30px;
        }
        .result {
    display: none; /* Mantiene el elemento oculto por defecto */
    font-size: 50px;
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    opacity: 0; /* Inicia completamente transparente */
    animation: fadeIn 5s forwards; /* Aplica la animación de 2 segundos */
}

@keyframes fadeIn {
    0% {
        opacity: 0; /* Transparente al inicio */
    }
    100% {
        opacity: 1; /* Completamente visible al final */
    }
}
        .show {
            display: block;
        }
        .cinta, .cinta3 {
            width: 25000%;
            overflow: hidden;
            padding: 10px 0;
            margin-top: 10px;
            position: relative;
	}
        .cinta2 {
            width: 25000%;
	    overflow: hidden;
            padding: 10px 0;
            margin-top: 10px;
        }
        .scroll {
            display: flex;
            animation: scroll 2000s linear infinite;
            will-change: transform;
	}
 	.scroll2 {
            display: flex;
            animation: scrollRight 3500s linear infinite;
            will-change: transform;
        }
        @keyframes scroll {
            from { transform: translateX(0); }
            to { transform: translateX(-100%); }
        }
        @keyframes scrollRight {
            from { transform: translateX(-10%); }
            to { transform: translateX(100%); }
        }
          .box {
            display: inline-block;
            margin: 0 15px; /* Espacio entre las cajas */
            padding: 30px;
            background-color: #ffffff;
            border: 2px solid #000;
            border-radius: 10px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            white-space: nowrap;
            font-size: 50px; /* Aumentar el tamaño de la fuente */
        }

	.boxA {
            display: inline-block;
            margin: 20px 15px; /* Espacio entre las cajas */
            padding: 20px;
            background-color: #D9D9D9;
            border: 2px solid #000;
            border-radius: 10px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            white-space: nowrap;
            font-size: 50px; /* Aumentar el tamaño de la fuente */
        }
        #countdown {
            font-size: 350px;
            font-weight: bold;
            margin-top: 20px;
            color: white;
        }
        .hidden {
            display: none;
        }
        #startBtn {
            margin-top: 8px; /* Mueve el botón hacia abajo */
            font-size: 35px; /* Aumentar el tamaño de la fuente */
            padding: 15px 30px; /* Aumentar el padding para hacer el botón más grande */
            border: 2px solid #000; /* Añadir borde */
            border-radius: 10px; /* Bordes redondeados */
            color: black; /* Texto blanco */
            cursor: pointer; /* Cambia el cursor al pasar sobre el botón */
            transition: background-color 0.3s; /* Transición para el cambio de color */
        }
        #startBtn:hover {
            background-color: #45a049; /* Cambiar el fondo cuando se pasa el cursor */
        }
        #closestResults {
            display: none;
            font-size: 18px;
            margin-top: 20px;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
        }
	    .billete {
            position: absolute;
	    font-size: 40px;
            width: 100px;
            height: 50px;
            background: green;
            color: white;
            font-weight: bold;
            text-align: center;
            line-height: 50px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            opacity: 0.8;
            transform: rotate(20deg);
            animation: caer 5s linear infinite;
        }

        @keyframes caer {
            0% {
                transform: translateY(-1920px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
	    }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="tombola"></div>
        <div id="participantsList">
            <h2><br></h2>
            <div class="cinta" id="cinta"> 
                <div class="scroll">
                   <div class="box"><span>Gustavo angel chablé Bernal - 36864</span></div>
<div class="box"><span>Gerardo Rubén  - 17000</span></div>
<div class="box"><span>Gerardo Rubén  - 16000</span></div>
<div class="box"><span>Gerardo Rubén  - 15000</span></div>
<div class="box"><span>Gerardo Rubén  - 14000</span></div>

<!-- Más participantes -->
                </div>
            </div>
        </div>

        <div id="participantsList2">
            <h2><br></h2>
            <div class="cinta2" id="cinta2">
                <div class="scroll2">
              <div class="box"><span>Jorge Armando Ramírez rubio - 2000</span></div>
<div class="box"><span>David flores valdobinos  - 2000</span></div>
<div class="box"><span>Sergio mendez - 1992</span></div>
<div class="box"><span>Jorge Armando Ramírez rubio - 1980</span></div>
                    <!-- Más participantes -->
                </div>
            </div>
        </div>

        <div id="participantsList3">
            <h2><br></h2>
            <div class="cinta3" id="cinta3">
                <div class="scroll">
                  <div class="box"><span>Brayan Enrique de la cruz palomera  - 1300</span></div>
<div class="box"><span>David flores  - 1288</span></div>
<div class="box"><span>Rodrigo maya - 1281</span></div>
<div class="box"><span>Howard antonio barrientos - 1275</span></div>
                    <!-- Más participantes -->
                </div>
            </div>
        </div>

         <div class="winner hidden" id="winnerText">
            
        </div>
        
        <!-- Contenedor del contador -->
        <div id="countdown"></div>

        <div id="result" class="result">
            <p><span id="winnerName"></span><span id="winnerGuess"></span></p>
        </div>
        
        <!-- Contenedor para los resultados cercanos -->
        <div id="closestResults"></div>

        <button id="startBtn" onclick="startTombola()">Iniciar Conteo</button>

    </div>

    <script>
	function crearBillete() {
        const billete = document.createElement("div");
        billete.classList.add("billete");
        billete.style.left = Math.random() * window.innerWidth + "px";
        billete.style.animationDuration = (Math.random() * 3 + 2) + "s";
        billete.textContent = "$";
        document.body.appendChild(billete);

        // Eliminar el billete después de que caiga
        billete.addEventListener("animationend", () => {
            billete.remove();
        });
    }

    // Crear billetes de manera continua
    setInterval(crearBillete, 9000);
   
        const participants = [
            
{ name: "Gustavo angel chablé Bernal", guess: 36864 },
{ name: "Gerardo Rubén ", guess: 17000 },
{ name: "Gerardo Rubén ", guess: 16000 },
{ name: "Gerardo Rubén ", guess: 15000 },

            // Más participantes
        ];

        const actualBalls = 1315;

        function startTombola() {
            document.getElementById("countdown").innerText = "";
            document.getElementById("result").classList.remove("show");
            document.getElementById("closestResults").classList.remove("show");
            document.getElementById("winnerText").classList.add("hidden");
            document.getElementById("participantsList").style.display = "none";
	    document.getElementById("participantsList2").style.display = "none";
	    document.getElementById("participantsList3").style.display = "none";
            document.getElementById("startBtn").style.display = "none";

            let countdown = 10;
            const countdownInterval = setInterval(() => {
                document.getElementById("countdown").innerText = countdown;
                countdown--;
                if (countdown < 0) {
                    clearInterval(countdownInterval);
                    document.getElementById("countdown").innerText = "";
                    selectWinner();
                    launchConfetti();
                }
            }, 1000);
        }

        function launchConfetti() {
            let duration = 5000;
            let animationEnd = Date.now() + duration;
            let interval = 100;

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            let confettiInterval = setInterval(() => {
                confetti({
                    startVelocity: randomInRange(20, 100),
                    angle: randomInRange(30, 125),
                    spread: randomInRange(50, 100),
                    decay: randomInRange(0.9, 0.95),
                    scalar: randomInRange(1, 3),
                    particles: 100,
                    colors: ['#FFD700', '#C0C0C0']
                });

                if (Date.now() > animationEnd) {
                    clearInterval(confettiInterval);
                }
            }, interval);
        }

        function selectWinner() {
    const winners = participants.filter(participant => participant.guess === actualBalls);
    console.log("Ganadores exactos: ", winners);  // Depuración

    if (winners.length > 0) {
        let winnerText = "";
        winners.forEach(winner => {
            winnerText += `<div class="boxA">${winner.name} (${winner.guess} pelotas)</div>`;
        });

        document.getElementById("winnerName").innerHTML = winnerText.trim();  // Mostrar el ganador
        document.getElementById("result").classList.add("show");
        document.getElementById("winnerText").classList.remove("hidden");
    } else {
        // Filtrar las suposiciones que no excedan el número exacto de pelotas
        const validParticipants = participants.filter(participant => participant.guess <= actualBalls);

        if (validParticipants.length > 0) {
            // Encontrar la menor diferencia, pero solo con suposiciones menores o iguales al número exacto
            let closestDiff = Math.min(...validParticipants.map(participant => Math.abs(participant.guess - actualBalls)));

            // Filtrar los participantes más cercanos que no excedan el número de pelotas
            const closestParticipants = validParticipants.filter(participant => Math.abs(participant.guess - actualBalls) === closestDiff);

            let closestText = `<div class="boxA">Los más cercanos fueron:</div><br>`;
            closestParticipants.forEach(participant => {
                closestText += `<div class="boxA">${participant.name} (${participant.guess} pelotas)</div>`;
            });

            document.getElementById("winnerName").innerHTML = closestText.trim();
        } else {
            // Si nadie se acercó sin exceder la cantidad, mostrar mensaje
            document.getElementById("winnerName").innerText = "No hubo ganadores exactos ni cercanos sin excederse.";
        }

        document.getElementById("result").classList.add("show");
        document.getElementById("winnerText").classList.remove("hidden");
    }
}



    </script>
</body>
</html>
